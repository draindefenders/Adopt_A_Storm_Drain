{"ast":null,"code":"/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\n\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  var script = document.createElement('script');\n  var key = 'olc_' + getUid(callback);\n\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') + (opt_callbackParam || 'callback') + '=' + key;\n  var timer = setTimeout(function () {\n    cleanup();\n\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n\n  window[key] = function (data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n\n  document.getElementsByTagName('head')[0].appendChild(script);\n}","map":{"version":3,"sources":["src/net.js"],"names":[],"mappings":"AAAA;;;AAGA,SAAQ,MAAR,QAAqB,WAArB;AAGA;;;;;;;;;;;;AAWA,OAAM,SAAU,KAAV,CAAgB,GAAhB,EAAqB,QAArB,EAA+B,WAA/B,EAA4C,iBAA5C,EAA6D;AACjE,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,MAAM,GAAG,GAAG,SAAS,MAAM,CAAC,QAAD,CAA3B;;AACA,WAAS,OAAT,GAAgB;AACd,WAAO,MAAM,CAAC,GAAD,CAAb;AACA,IAAA,MAAM,CAAC,UAAP,CAAkB,WAAlB,CAA8B,MAA9B;AACD;;AACD,EAAA,MAAM,CAAC,KAAP,GAAe,IAAf;AACA,EAAA,MAAM,CAAC,GAAP,GAAa,GAAG,IAAI,GAAG,CAAC,OAAJ,CAAY,GAAZ,KAAoB,CAAC,CAArB,GAAyB,GAAzB,GAA+B,GAAnC,CAAH,IACR,iBAAiB,IAAI,UADb,IAC2B,GAD3B,GACiC,GAD9C;AAEA,MAAM,KAAK,GAAG,UAAU,CAAC,YAAA;AACvB,IAAA,OAAO;;AACP,QAAI,WAAJ,EAAiB;AACf,MAAA,WAAW;AACZ;AACF,GALuB,EAKrB,KALqB,CAAxB;;AAMA,EAAA,MAAM,CAAC,GAAD,CAAN,GAAc,UAAS,IAAT,EAAa;AACzB,IAAA,YAAY,CAAC,KAAD,CAAZ;AACA,IAAA,OAAO;AACP,IAAA,QAAQ,CAAC,IAAD,CAAR;AACD,GAJD;;AAKA,EAAA,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyC,WAAzC,CAAqD,MAArD;AACD","sourceRoot":"","sourcesContent":["/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n    var script = document.createElement('script');\n    var key = 'olc_' + getUid(callback);\n    function cleanup() {\n        delete window[key];\n        script.parentNode.removeChild(script);\n    }\n    script.async = true;\n    script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n        (opt_callbackParam || 'callback') + '=' + key;\n    var timer = setTimeout(function () {\n        cleanup();\n        if (opt_errback) {\n            opt_errback();\n        }\n    }, 10000);\n    window[key] = function (data) {\n        clearTimeout(timer);\n        cleanup();\n        callback(data);\n    };\n    document.getElementsByTagName('head')[0].appendChild(script);\n}\n//# sourceMappingURL=net.js.map"]},"metadata":{},"sourceType":"module"}